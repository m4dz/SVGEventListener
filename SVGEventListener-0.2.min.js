!function(e){"use strict";function t(e){var t,n=e.split(":");if(1===n.length)return t=n[0],-1!==t.lastIndexOf("ms")?+t:(-1!==t.lastIndexOf("min")?t=60*parseFloat(t):-1!==t.lastIndexOf("h")&&(t=3600*parseFloat(t)),1e3*parseFloat(t));n.reverse(),t=0;for(var i in n)t+=1e3*n[i]*Math.pow(60,i);return t}function n(e){this.el=e,this._init()}var i={addEventListener:Element.prototype.addEventListener,svgAnimateBeginElement:SVGAnimateElement.prototype.beginElement,svgAnimateTransformBeginElement:SVGAnimateTransformElement.prototype.beginElement},r="http://www.w3.org/2000/svg",s=function(e){return"string"==typeof e},o=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},l=function(t){return t===e},a={},d=function(t){if(a[t]!==e)return a[t];a[t]=!1;var n=document.createElementNS(r,"svg"),s=document.createElementNS(r,"rect"),o=document.createElementNS(r,"animate");return o.setAttributeNS(null,"dur","1ms"),s.appendChild(o),n.appendChild(s),i.addEventListener.call(o,t+"Event",function(){a[t]=!0},!1),n.setAttributeNS(null,"style","display:none"),document.body.appendChild(n),setTimeout(function(){document.body.removeChild(n)},50),a[t]};n.prototype={constructor:n,_init:function(){var e,n=this,i=this.el.getAttribute("begin"),r=this.el.getAttribute("dur");if(this._listeners={},"indefinite"!==i&&-1===i.indexOf(".end"))window.setTimeout(function(){d("begin")||n.fire("beginEvent")},t(i));else if(-1!==(e=i.indexOf(".end"))){var s=document.getElementById(i.substr(0,e));s.addEventListener("endEvent",function(){n.fire("beginEvent")})}this.add("beginEvent",function(){window.setTimeout(function(){d("end")||n.fire("endEvent")},t(r))})},add:function(e,t){l(this._listeners[e])&&(this._listeners[e]=[]),this._listeners[e].push(t)},fire:function(e){if(s(e)&&(e={type:e}),e.target&&e.currentTarget||(e.target=e.currentTarget=this.parent),!e.type)throw new Error('Event object missing "type" property.');if(o(this._listeners[e.type])){var t=this._listeners[e.type];for(var n in t)t[n].call(this.el,e)}}},Element.prototype.addEventListener=function(e,t,r){return(this instanceof SVGAnimateElement||this instanceof SVGAnimateTransformElement)&&(l(this.listeners)&&(this.listeners=new n(this)),"endEvent"!==e||d("end")||this.listeners.add(e,t),"beginEvent"!==e||d("begin")||this.listeners.add(e,t)),i.addEventListener.call(this,e,t,r)},SVGAnimateElement.prototype.beginElement=function(){return d("begin")||this.listeners===e||this.listeners.fire("beginEvent"),i.svgAnimateBeginElement.call(this)},SVGAnimateTransformElement.prototype.beginElement=function(){return d("begin")||this.listeners===e||this.listeners.fire("beginEvent"),i.svgAnimateTransformBeginElement.call(this)}}();