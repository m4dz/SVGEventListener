// SVGEventListener.js
// Version - 0.1-pre
//
// by MAD - @madsgraphics - ecrire[at]madsgraphics.com
//
// https://github.com/madsgraphics/SVGEventListener.js/
//
// Tri-license - WTFPL | MIT | BSD
//
// Please minify before use.
//
(function(e,t,n){"use strict";function s(e){e="on"+e;var t=e in i;return t||(i.setAttribute(e,"return;"),t=typeof i[e]=="function"),t}function o(e){var t,n=e.split(":");if(n.length==1)return(t=n[0].lastIndexOf("ms"))!=-1?Number(n[0].substring(0,t)):(t=n[0].lastIndexOf("s"))!=-1?n[0].substring(0,t)*1e3:n[0]*1e3;n.reverse(),e=0;for(var r in n)e+=n[r]*Math.pow(60,r)*1e3;return e}function u(){this._listeners={}}var r=n.prototype.addEventListener,i=t.createElementNS("http://www.w3.org/2000/svg","svg");u.prototype={constructor:u,add:function(t,n){typeof this._listeners[t]=="undefined"&&(this._listeners[t]=[]),this._listeners[t].push(n)},fire:function(t){typeof t=="string"&&(t={type:t}),t.target||(t.target=this);if(!t.type)throw new Error("Event object missing 'type' property.");if(this._listeners[t.type]instanceof Array){var n=this._listeners[t.type];for(var r in n)n[r].call(this,t)}}};var a=new u;n.prototype.addEventListener=function(t,n,i){var u;return t=="endEvent"&&!s(t.substring(0,t.indexOf("Event")))&&(a.add(t,n),u=o(this.getAttribute("begin"))+o(this.getAttribute("dur")),e.setTimeout(function(){a.fire(t)},u)),r.call(this,t,n,i)}})(this,document,Element);