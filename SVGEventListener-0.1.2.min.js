(function(e,t,n){"use strict";function i(e){var t,n=e.split(":");if(1==n.length)return t=n[0],-1!=t.lastIndexOf("ms")?parseInt(t):(-1!=t.lastIndexOf("min")?t=60*parseFloat(t):-1!=t.lastIndexOf("h")&&(t=3600*parseFloat(t)),1e3*parseFloat(t));n.reverse(),t=0;for(var i in n)t+=1e3*n[i]*Math.pow(60,i);return t}function r(e){this._listeners={},this.autoFire={begin:!1,end:!1},this.parent=e}var s=n.prototype.addEventListener,o="http://www.w3.org/2000/svg",l=function(e){return"string"==typeof e},a=Array.isArray||function(e){return"[object Array]"==toString.call(e)},u=function(e){return void 0===e},d={},f=function(e){if(d[e]!==void 0)return d[e];d[e]=!1;var n=t.createElementNS(o,"svg"),i=t.createElementNS(o,"rect"),r=t.createElementNS(o,"animate");return r.setAttributeNS(null,"dur","1ms"),i.appendChild(r),n.appendChild(i),s.call(r,e+"Event",function(){d[e]=!0},!1),n.setAttributeNS(null,"style","display:none"),t.body.appendChild(n),setTimeout(function(){t.body.removeChild(n)},50),d[e]};r.prototype={constructor:r,add:function(e,t){u(this._listeners[e])&&(this._listeners[e]=[]),this._listeners[e].push(t)},fire:function(e){if(l(e)&&(e={type:e}),e.target&&e.currentTarget||(e.target=e.currentTarget=this.parent),!e.type)throw Error("Event object missing 'type' property.");if(a(this._listeners[e.type])){var t=this._listeners[e.type];for(var n in t)t[n].call(this,e)}}},n.prototype.addEventListener=function(n,o,l){var a,d=this.getAttribute("begin"),h=this.getAttribute("dur"),c=this;if(u(this.listeners)&&(this.listeners=new r(this)),"endEvent"!=n||f("end")||(this.listeners.add(n,o),this.listeners.autoFire.end||(this.addEventListener("beginEvent",function(){e.setTimeout(function(){f("end")||c.listeners.fire("endEvent")},i(h))}),this.listeners.autoFire.end=!0)),"beginEvent"==n&&!f("begin"))if(this.listeners.add(n,o),"indefinite"!=d&&-1==d.indexOf(".end"))this.listeners.autoFire.begin||(e.setTimeout(function(){f("begin")||c.listeners.fire("beginEvent")},i(d)),this.listeners.autoFire.begin=!0);else if(-1!=(a=d.indexOf(".end"))){var p=t.getElementById(d.substr(0,a));p.addEventListener("endEvent",function(){c.listeners.fire("beginEvent")})}else"indefinite"==d&&(this.beginElement=function(){return this.listeners.fire("beginEvent"),this.__proto__.beginElement.call(this)});return s.call(this,n,o,l)}})(this,document,Element);